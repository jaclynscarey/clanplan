{% extends 'base.html' %}
{% block content %}

{% if messages %}
    {% for message in messages %}
        <p class="text-danger">{{ message }}</p>
    {% endfor %}
{% endif %}
<br><br>
<ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'index' %}">Events</a></li>
    <li class="breadcrumb-item active">{{ event.title }}</li>
</ol>

<div class="row">
    <div class="col s6">
        <h5 class="header">{{ event.title }}</h5>
        <div class="card">
            <div class="card-content">
                <p id="event-date" class="{{ event.date|date:'Y-m-d' }}">Date: {{ event.date }}</p>
                <p>Time: {{ event.time }}</p>
                <p>Address: <span id="location">{{ event.location }}</span></p>
                <hr>
                <p>Description: {{ event.description }}</p>
            </div>
            <div class="card-action">
                <a href="{% url 'events_update' event.id %}">Edit</a>
                <a href="{% url 'events_delete' event.id %}">Delete</a>
            </div>
        </div>
    </div>
    <div class="col s6">
        <h5 class="header">Weather Forecast</h5>
        <div class="card">
            <div class="card-content" id="weather-forecast" data-date="{{ event.date|date:'Y-m-d' }}">                
            </div>
        </div>
    </div>
</div>

<hr>

<div class="row">
    <div class="col s6">
        <h5>Attending</h5>
        {% if event.attendees.count %}
            {% for attendee in event.attendees.all %}
                <div class="card">
                    <div class="card-content">
                        <p>{{ attendee }} <span><a href="{% url 'unassoc_attendee' event.id attendee.id %}">Remove</a></span></p>                        
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <h5>No Attendees</h5>
        {% endif %}
    </div>
    <div class="col s6">
        <h5><span class="red-text">Not</span> Attending</h5>
        {% if members_not_attending.count %}
            {% for attendee in members_not_attending %}
            <div class="card">
                <div class="card-content">
                    <p>{{ attendee }} <span><a href="{% url 'assoc_attendee' event.id attendee.id %}">Add</a></span></p>                    
                </div>
            </div>
            {% endfor %}
        {% else %}
            <h5>Everyone is Attending</h5>
        {% endif %}
    </div>
</div>


{% endblock %}