{% extends 'base.html' %}
{% block content %}

<h1>Event Details</h1>

{% if messages %}
    {% for message in messages %}
        <p{% if message.tags %} class="{{ message.tags }} red-text"{% endif %}>{{ message }}</p>
    {% endfor %}
{% endif %}

<div class="row">
    <div class="col s6">
        <div class="card">
            <div class="card-content">
                <span class="card-title">{{ event.title }}</span>
                <p id="event-date" class="{{ event.date|date:'Y-m-d' }}">{{ event.date }}</p>
                <p>{{ event.time }}</p>
                <p>{{ event.location }}</p>
                <p>{{ event.description }}</p>
            </div>
            <div class="card-action">
                <a href="{% url 'events_update' event.id %}">Edit</a>
                <a href="{% url 'events_delete' event.id %}">Delete</a>
            </div>
        </div>
    </div>
    <div class="col s6">
        <div class="card">
            <div class="card-content" id="weather-forecast" data-date="{{ event.date|date:'Y-m-d' }}">                
            </div>
        </div>
    </div>
</div>

<hr>

<div class="row">
    <div class="col s6">
        <h3>Family Members Attending</h3>
        {% if event.attendees.count %}
            {% for attendee in event.attendees.all %}
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">
                            {{ attendee }}
                        </span>
                    </div>
                    <div class="card-action">
                        <form action="{% url 'unassoc_attendee' event.id attendee.id %}" method="post">
                            {% csrf_token %}
                            <button class="btn red darken-2" type="submit">Remove</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <h5>No Attendees</h5>
        {% endif %}
    </div>
    <div class="col s6">
        <h3>Family Members <span class="red-text">Not</span> Attending</h3>
        {% if members_not_attending.count %}
            {% for attendee in members_not_attending %}
            <div class="card">
                <div class="card-content">
                    <span class="card-title">
                        {{ attendee }}
                    </span>
                </div>
                <div class="card-action">
                    <form action="{% url 'assoc_attendee' event.id attendee.id %}" method="post">
                        {% csrf_token %}
                        <button class="btn green darken-2" type="submit">Add</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <h5>Everyone is Attending</h5>
        {% endif %}
    </div>
</div>


{% endblock %}